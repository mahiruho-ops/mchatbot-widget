<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Floating Button - mChatBot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .test-button {
            background: #701FAB;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #5a1a8a;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Floating Button Functionality</h1>
        
        <div class="test-instructions">
            <h3>üìã Test Instructions:</h3>
            <ol>
                <li><strong>Start Chat:</strong> Click "Start Chat" to initialize the chatbot</li>
                <li><strong>Minimize:</strong> Click the "‚àí" button in the header to minimize</li>
                <li><strong>Test Floating Button:</strong> Click the circular floating button to maximize</li>
                <li><strong>Verify:</strong> Ensure the chatbot expands back to full size</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>üéØ Test Controls</h3>
            <button class="test-button" onclick="startChat()">Start Chat</button>
            <button class="test-button" onclick="minimizeChat()">Minimize Chat</button>
            <button class="test-button" onclick="maximizeChat()">Maximize Chat</button>
            <button class="test-button" onclick="clearChat()">Clear Chat</button>
        </div>

        <div class="test-section">
            <h3>üì± Chatbot Widget</h3>
            <mchatbot-widget 
                theme-color="#701FAB"
                height="400px"
                position="bottom-right">
            </mchatbot-widget>
        </div>

        <div class="test-section">
            <h3>üîç Debug Information</h3>
            <div id="debug-info">
                <p><strong>Status:</strong> <span id="status">Not started</span></p>
                <p><strong>Minimized:</strong> <span id="minimized">No</span></p>
                <p><strong>Mode:</strong> <span id="mode">chat</span></p>
            </div>
        </div>
    </div>

    <script type="module">
        import './dist/mchatbot.js';
        
        let widget = null;
        
        function startChat() {
            widget = document.querySelector('mchatbot-widget');
            if (widget) {
                // Simulate starting a chat
                widget.isStarted = true;
                widget.render();
                widget.setupEventListeners();
                updateDebugInfo();
                console.log('‚úÖ Chat started');
            }
        }
        
        function minimizeChat() {
            if (widget && widget.isStarted) {
                widget.toggleChat();
                updateDebugInfo();
                console.log('üì± Chat minimized');
            }
        }
        
        function maximizeChat() {
            if (widget && widget.isStarted) {
                widget.toggleChat();
                updateDebugInfo();
                console.log('üîÑ Chat maximized');
            }
        }
        
        function clearChat() {
            if (widget) {
                widget.clearSession();
                updateDebugInfo();
                console.log('üóëÔ∏è Chat cleared');
            }
        }
        
        function updateDebugInfo() {
            if (widget) {
                document.getElementById('status').textContent = widget.isStarted ? 'Started' : 'Not started';
                document.getElementById('minimized').textContent = widget.isMinimized ? 'Yes' : 'No';
                document.getElementById('mode').textContent = widget.mode;
            }
        }
        
        // Auto-update debug info every second
        setInterval(updateDebugInfo, 1000);
        
        // Listen for widget events
        document.addEventListener('DOMContentLoaded', () => {
            widget = document.querySelector('mchatbot-widget');
            if (widget) {
                updateDebugInfo();
            }
        });
    </script>
</body>
</html>
